<!DOCTYPE html>
<!--
UNH Capstone 2022 Project

Ben Grimes, Jeff Fernandes, Max Hennessey, Liqi Li
-->
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>PiRail</title>
        <link rel="icon" href="../static/redRail.ico">
        <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
        <link rel="stylesheet" href="../static/stylesheet.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>

        <!-- Hammer.js is used for gesture recognition.-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha512-UXumZrZNiOwnTcZSHLOfcTs0aos2MzBWHXOHOuB0J/R44QB0dwY5JgfbvljXcklVf65Gc4El6RjZ+lnwd2az2g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <!-- Zoom function-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.2.0/chartjs-plugin-zoom.min.js" integrity="sha512-TT0wAMqqtjXVzpc48sI0G84rBP+oTkBZPgeRYIOVRGUdwJsyS3WPipsNh///ay2LJ+onCM23tipnz6EvEy2/UA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <style>
        button{
            cursor: pointer;
        }
    </style>
    </head>

    <body>
        <div class="header">
            <img src="../static/PiRail_color.png" alt="PiRail Logo">
            <div class="header-right">
                <a class="active" href="/">Data</a>
                <!--<a href="#contact">Contact</a>-->
                <a href="about">About</a>
                <a href="info">Info</a>
            </div>
        </div>

        <div class="padding">
        <h1>My Data Recorded</h1>
        <p>Enter Range:</p>

            <form id="rangeFrom" method="post">
                <label for="minRange">Minimum Range: </label>
                <input type="number" step="0.0001" id="minRange" size="20" name="minRange"><br>
                <label for="maxRange">Maximum Range: </label>
                <input type="number" step="0.0001" id="maxRange" size="20" name="maxRange"><br><br>
                <button type="submit" id="submit">Submit</button>
            </form>

            <div class = "chartbox">
                <canvas id="myChart" width="0" height="500"></canvas>
            </div>

            <button id="reset">Reset</button>
{#            <script src="../static/main.js"></script>#}
            <script>
                function display_chart(acc_z, mileage) {
                    const ctx = document.getElementById('myChart').getContext('2d'); //greater than min and less then max
                    const myChart = new Chart(ctx, {
                        type: 'scatter',
                        data: {
                            labels: mileage,
                            datasets: [{
                                label: 'acc_Z', // label of the chart
                                data: acc_z,
                                backgroundColor: 'transparent',
                                borderColor: 'blue',
                                borderWidth: 1,
                                //pointRadius: 0,
                                pointHoverRadius: 0,
                            },
			    ]
                        },
                        options: {
                            //maintainAspectRatio: false,
                            //bezierCurve : false,
                            events: [],
                            plugins: {
                                zoom: {
                                    pan: {
                                        enabled: true,
                                    },
                                    zoom: {
                                        mode:'x',
                                        wheel: {
                                            enabled: true,
                                            speed: 0.2,
                                        },
                                        pinch: { // Help to zoom in mobile
                                            enabled: true
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
                display_chart({{ acc_z }}, {{ mileage }})
            </script>
        </div>
        <div id="stats">
            <table>
                <tr>
                    <th colspan="6">
                        Averages
                    </th>
                </tr>
                <tr>
                    {% for name in stats_names %}
                        <th>{{ name }}</th>
                    {% endfor %}
                </tr>
                <tr>
                    {% for stat in stats_list %}
                        <td>{{ stat }}</td>
                    {% endfor %}
                </tr>
            </table>
        </div>
    <br><br><br>
    </body>

    <footer>
        <p>Research Project By Jon Miner</p>
        <a target="_blank" rel="noreferrer noopener" href="https://www.facebook.com/PiRailNH/?ref=page_internal">
            <img class="small" src="../static/facebook.png" alt="PiRail Facebook"></a>
    </footer>
</html>
